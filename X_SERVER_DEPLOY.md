# 🚀 Xサーバーへのデプロイガイド

## 前提条件

- XサーバーのアカウントとFTP情報
- ドメイン: `www.toshiboh.com`
- FTPクライアント（FileZilla、Cyberduckなど）

---

## デプロイ手順

### 1. 静的エクスポートの設定

`next.config.ts`に`output: 'export'`が設定されていることを確認してください。

### 2. ビルドとエクスポート

```bash
# 依存関係のインストール
npm install

# 静的サイトをビルド
npm run build

# ビルド後、`out`ディレクトリが作成されます
```

### 3. 静的ファイルの生成

`sitemap.xml`と`feed.xml`を事前に生成：

```bash
npm run generate:static
```

### 4. FTPでアップロード

1. FTPクライアントでXサーバーに接続
2. ドメインのルートディレクトリ（通常は`/home/[サーバーID]/[ドメイン名]/public_html/`）に接続
3. `out`ディレクトリの中身をすべてアップロード
   - `.htaccess`ファイルもアップロード（リダイレクト設定用）

### 5. パーミッションの設定

Xサーバーのコントロールパネルで：
- ディレクトリのパーミッション: `755`
- ファイルのパーミッション: `644`

---

## 注意事項

### 制限事項

- **APIルートは使えません**: 静的エクスポートでは`route.ts`は動作しません
- **ミドルウェアは使えません**: 静的エクスポートでは動作しません
- **動的ルート**: `generateStaticParams`で事前に生成する必要があります

### 対応済み

- ✅ `sitemap.xml`と`feed.xml`は静的ファイルとして生成されます
- ✅ すべての記事ページは事前に生成されます
- ✅ カテゴリー・タグページも事前に生成されます

---

## 更新手順

記事を追加・更新した場合：

1. ローカルでMarkdownファイルを編集
2. `npm run build`でビルド
3. `npm run generate:static`で静的ファイルを生成
4. `out`ディレクトリの内容をFTPでアップロード

---

## トラブルシューティング

### 404エラーが出る

- `.htaccess`ファイルが正しくアップロードされているか確認
- パーミッションが正しく設定されているか確認

### 画像が表示されない

- `public`ディレクトリの内容が`out`ディレクトリにコピーされているか確認
- 画像のパスが正しいか確認

### CSSが適用されない

- `out/_next/static`ディレクトリが正しくアップロードされているか確認

