# 2段階認証（MFA）の実装ガイド

メール/パスワード認証のセキュリティを強化するために、2段階認証（MFA: Multi-Factor Authentication）を実装します。

## 🔐 セキュリティの比較

### メール/パスワード認証のみ
- ❌ パスワード突破のリスク
- ❌ フィッシング攻撃に脆弱
- ✅ 実装が簡単

### メール/パスワード + MFA
- ✅ パスワード突破されても追加の認証が必要
- ✅ セキュリティが大幅に向上
- ⚠️ 実装がやや複雑

### Google認証（推奨）
- ✅ Googleの2段階認証を自動的に利用
- ✅ パスワード管理不要
- ✅ 実装が簡単
- ✅ 最も安全

## 🎯 推奨される方法

**Google認証を推奨します**。理由：
1. Googleの2段階認証を自動的に利用できる
2. パスワード管理が不要
3. セキュリティが高い
4. 実装が簡単

## 📋 実装オプション

### オプション1: Google認証のみを使用（推奨）

メール/パスワード認証を無効化し、Google認証のみを使用します。

**メリット:**
- Googleの2段階認証を自動的に利用
- パスワード管理が不要
- セキュリティが高い

**設定方法:**
1. Supabaseダッシュボード → Authentication → Providers
2. 「Email」を無効化（オプション）
3. 「Google」を有効化（既に設定済み）

### オプション2: メール/パスワード + MFAを実装

SupabaseのMFA機能を使用して、メール/パスワード認証に2段階認証を追加します。

**実装が必要:**
- MFA有効化のUI
- TOTP（Time-based One-Time Password）の設定
- ログイン時のMFA確認フロー

**Supabaseでの設定:**
1. Supabaseダッシュボード → Authentication → Settings
2. 「Multi-Factor Authentication」を有効化
3. アプリケーション側でMFAフローを実装

### オプション3: メール/パスワードを無効化（最も安全）

メール/パスワード認証を完全に無効化し、Google認証のみを許可します。

**メリット:**
- パスワード突破のリスクがゼロ
- Googleの2段階認証を強制
- 最も安全

## 💡 推奨される実装

**Google認証のみを使用することを推奨します。**

理由：
1. ✅ Googleの2段階認証を自動的に利用できる
2. ✅ パスワード管理が不要
3. ✅ セキュリティが高い
4. ✅ 実装が簡単（既に実装済み）

メール/パスワード認証を無効化する場合は、ログインフォームからメール/パスワードの入力欄を削除し、Google認証ボタンのみを表示します。

