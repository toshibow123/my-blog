# 管理者ユーザーの作成方法

メール/パスワード認証でログインするために、Supabaseで管理者ユーザーを作成します。

## 📋 手順

### 1. Supabaseダッシュボードでユーザーを作成

1. **Supabaseダッシュボードにアクセス**
   - https://supabase.com/dashboard
   - プロジェクトを選択

2. **Authentication → Users を開く**
   - 左側のサイドバー → 「Authentication」をクリック
   - 「Users」タブをクリック

3. **「Add user」ボタンをクリック**
   - 画面右上の緑色の「Add user」ボタンをクリック

4. **ユーザー情報を入力**
   - **Email**: 管理者のメールアドレス（例: `admin@gmail.com`）
   - **Password**: パスワード（8文字以上推奨）
   - **Auto Confirm User**: ✅ チェックを入れる（メール確認をスキップ）

5. **「Create user」をクリック**

### 2. 環境変数を設定

作成したユーザーのメールアドレスを `.env.local` に追加します。

1. **`.env.local` ファイルを開く**
   - プロジェクトルートの `.env.local` を編集

2. **許可するメールアドレスを追加**
   ```bash
   ALLOWED_ADMIN_EMAILS=admin@gmail.com
   ```
   - 作成したユーザーのメールアドレスを設定

3. **複数のユーザーを許可する場合**
   ```bash
   ALLOWED_ADMIN_EMAILS=admin1@gmail.com,admin2@gmail.com
   ```

4. **開発サーバーを再起動**
   ```bash
   npm run dev
   ```

### 3. ログインをテスト

1. ブラウザで `/login` にアクセス
2. 作成したメールアドレスとパスワードを入力
3. 「ログイン」ボタンをクリック
4. 管理者ダッシュボード（`/admin`）にリダイレクトされれば成功です

## ⚠️ 注意事項

- **Auto Confirm User** にチェックを入れないと、メール確認が必要になります
- パスワードは8文字以上を推奨します
- 本番環境では、強力なパスワードを使用してください

## 🔐 セキュリティのベストプラクティス

1. **強力なパスワードを使用**
   - 大文字、小文字、数字、記号を含む
   - 12文字以上推奨

2. **環境変数を保護**
   - `.env.local` は絶対にGitにコミットしない
   - 本番環境では、環境変数を安全に管理

3. **定期的にパスワードを変更**

## 📝 トラブルシューティング

### ログインできない場合

1. メールアドレスとパスワードが正しいか確認
2. `.env.local` の `ALLOWED_ADMIN_EMAILS` にメールアドレスが含まれているか確認
3. 開発サーバーを再起動

### 「Auto Confirm User」を忘れた場合

- Supabaseダッシュボード → Authentication → Users
- 作成したユーザーをクリック
- 「Confirm email」をクリックして手動で確認

